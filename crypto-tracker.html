<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Crypto Tracker - Live Prices & Historical Data</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      .coin-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
      }
      .loading-spinner {
        border: 3px solid #f3f3f3;
        border-top: 3px solid #3b82f6;
        border-radius: 50%;
        width: 30px;
        height: 30px;
        animation: spin 1s linear infinite;
      }
      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }
      .chart-container {
        position: relative;
        height: 400px;
        width: 100%;
      }
      .price-up {
        color: #10b981;
      }
      .price-down {
        color: #ef4444;
      }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
  <!-- Header -->
  <header class="bg-gradient-to-r from-blue-600 to-purple-700 text-white shadow-lg">
    <div class="container mx-auto px-4 py-6">
      <div class="flex flex-col md:flex-row justify-between items-center">
        <div class="flex items-center mb-4 md:mb-0">
          <img
            src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/69f58b63-4624-413a-a52e-309af184acac.png"
            alt="Crypto Tracker Logo - Digital currency tracking application with blockchain visualization"
            class="mr-3 rounded-lg"
            width="60"
            height="60"
          />
          <h1 class="text-2xl md:text-3xl font-bold">Crypto Tracker</h1>
        </div>
        <div class="text-sm md:text-base">
          <span class="last-updated"
            >Last updated: <span id="lastUpdateTime">Loading...</span></span
          >
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="container mx-auto px-4 py-8">
    <!-- Search Section -->
    <div class="mb-8">
      <div class="relative max-w-2xl mx-auto">
        <input
          type="text"
          id="searchInput"
          placeholder="Search cryptocurrencies..."
          class="w-full px-4 py-3 pl-12 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"
        />
        <div
          class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"
        >
          <i class="fas fa-search text-gray-400"></i>
        </div>
      </div>
    </div>

    <!-- Coins Grid -->
    <div class="mb-8">
      <h2 class="text-xl font-semibold mb-4 text-gray-800">
        Top 50 Cryptocurrencies
      </h2>
      <div
        id="coinsGrid"
        class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"
      >
        <div class="animate-pulse">
          <div class="bg-white rounded-lg shadow p-4 h-32">
            <div class="flex items-center mb-3">
              <div class="w-8 h-8 bg-gray-300 rounded-full mr-3"></div>
              <div class="h-4 bg-gray-300 rounded w-1/3"></div>
            </div>
            <div class="h-6 bg-gray-300 rounded w-1/2 mb-2"></div>
            <div class="h-4 bg-gray-300 rounded w-2/3"></div>
          </div>
        </div>
        <!-- More loading cards will be generated by JS -->
      </div>
    </div>

    <!-- Chart Section -->
    <div
      id="chartSection"
      class="hidden bg-white rounded-lg shadow-lg p-6 mb-8"
      aria-live="polite"
    >
      <div class="flex justify-between items-center mb-6">
        <h3 class="text-xl font-semibold" id="chartTitle">Price History</h3>
        <button
          id="closeChart"
          class="text-gray-500 hover:text-gray-700"
          aria-label="Close price history chart"
        >
          <i class="fas fa-times text-xl"></i>
        </button>
      </div>
      <div class="chart-container">
        <canvas id="priceChart" aria-label="Price history chart"></canvas>
      </div>
    </div>

    <!-- Info Section -->
    <div class="bg-white rounded-lg shadow p-6 text-center">
      <img
        src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/f7b2055c-9732-4cfd-855f-a26868bd8fb9.png"
        alt="Cryptocurrency market analytics dashboard showing real-time price movements and trading volume across multiple digital assets"
        class="mx-auto mb-4 rounded-lg"
        width="800"
        height="400"
      />
      <h3 class="text-xl font-semibold mb-2">Real-time Crypto Tracking</h3>
      <p class="text-gray-600 mb-4">
        Track prices of top 50 cryptocurrencies with live updates and
        historical data visualization
      </p>
      <div class="flex justify-center space-x-4">
        <span
          class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm"
          >Live Updates</span
        >
        <span
          class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm"
          >Historical Data</span
        >
        <span
          class="bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm"
          >Search & Filter</span
        >
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="bg-gray-800 text-white py-8">
    <div class="container mx-auto px-4 text-center">
      <p>Â© 2024 Crypto Tracker. Real-time cryptocurrency price monitoring.</p>
    </div>
  </footer>

  <script>
    // Coin data with emojis
    const coins = {
      bitcoin: "ğŸŸ ",
      ethereum: "ğŸŸ£",
      binancecoin: "ğŸŸ¡",
      ripple: "ğŸ’§",
      solana: "â˜€ï¸",
      toncoin: "ğŸ”µ",
      cardano: "ğŸ”·",
      dogecoin: "ğŸ•",
      polkadot: "âš«",
      litecoin: "âš¡",
      chainlink: "ğŸ”—",
      stellar: "ğŸŒŸ",
      vechain: "ğŸ›¡ï¸",
      tron: "ğŸš€",
      monero: "ğŸ§¡",
      eos: "ğŸ…´",
      tezos: "âœï¸",
      cosmos: "â˜„ï¸",
      "theta-token": "ğŸ¬",
      filecoin: "ğŸ“",
      uniswap: "ğŸ¦„",
      aave: "ğŸ¦",
      "shiba-inu": "ğŸ•",
      algorand: "ğŸ”µ",
      "avalanche-2": "ğŸ”ï¸",
      "crypto-com-chain": "ğŸ’³",
      "elrond-erd-2": "ğŸŒ",
      decentraland: "ğŸŒ",
      "the-graph": "ğŸ“Š",
      maker: "âš™ï¸",
      "compound-governance-token": "ğŸ›ï¸",
      "bitcoin-cash": "ğŸ’µ",
      dash: "ğŸš—",
      zcash: "ğŸ›¡ï¸",
      waves: "ğŸŒŠ",
      neo: "ğŸŸ¢",
      iota: "ğŸ”º",
      "ftx-token": "ğŸ¦Š",
      "celsius-degree-token": "ğŸŒ¡ï¸",
      "basic-attention-token": "ğŸ­",
      enjincoin: "ğŸ®",
      chiliz: "ğŸŸï¸",
      "huobi-token": "ğŸ”¥",
      kusama: "ğŸ¦‹",
      "pancakeswap-token": "ğŸ¥",
      "hedera-hashgraph": "ğŸŒ¿",
      bitTorrent: "ğŸµ",
      loopring: "ğŸ”„",
      "yearn-finance": "ğŸ“ˆ",
      sushi: "ğŸ£",
      zilliqa: "âš¡",
    };

    let currentPrices = {};
    let priceChart = null;
    let refreshInterval;

    // Format price with proper decimals
    function formatPrice(price) {
      if (price === null || price === undefined) return "N/A";
      if (price < 0.01) return `$${price.toFixed(6)}`;
      if (price < 1) return `$${price.toFixed(4)}`;
      return `$${price.toFixed(2)}`;
    }

    // Fetch current prices
    async function fetchPrices() {
      try {
        const ids = Object.keys(coins).join(",");
        const response = await fetch(
          `https://api.coingecko.com/api/v3/simple/price?ids=${ids}&vs_currencies=usd`
        );
        const data = await response.json();
        currentPrices = data;
        updatePricesDisplay(data);
        document.getElementById("lastUpdateTime").textContent =
          new Date().toLocaleTimeString();
      } catch (error) {
        console.error("Error fetching prices:", error);
      }
    }

    // Update prices display
    function updatePricesDisplay(prices) {
      const coinsGrid = document.getElementById("coinsGrid");
      coinsGrid.innerHTML = "";

      Object.entries(coins).forEach(([coinId, emoji]) => {
        const price = prices[coinId]?.usd;
        const coinName = coinId
          .replace(/-/g, " ")
          .replace(/\b\w/g, (l) => l.toUpperCase());

        const coinCard = document.createElement("div");
        coinCard.className =
          "coin-card bg-white rounded-lg shadow p-4 hover:shadow-lg transition-all duration-300 cursor-pointer";
        coinCard.innerHTML = `
                    <div class="flex items-center mb-3">
                        <span class="text-2xl mr-3">${emoji}</span>
                        <h3 class="font-semibold text-gray-800">${coinName}</h3>
                    </div>
                    <div class="text-2xl font-bold text-gray-900 mb-2">${formatPrice(
                      price
                    )}</div>
                    <div class="text-sm text-gray-500">Click to view history</div>
                `;

        coinCard.addEventListener("click", () => showCoinHistory(coinId, coinName));
        coinsGrid.appendChild(coinCard);
      });
    }

    // Show coin history
    async function showCoinHistory(coinId, coinName) {
      try {
        document.getElementById("chartSection").classList.remove("hidden");
        document.getElementById("chartTitle").textContent = `${coinName} Price History (2 Years)`;

        const response = await fetch(
          `https://api.coingecko.com/api/v3/coins/${coinId}/market_chart?vs_currency=usd&days=730`
        );
        const data = await response.json();

        renderPriceChart(data.prices, coinName);

        // Scroll to chart
        document.getElementById("chartSection").scrollIntoView({ behavior: "smooth" });
      } catch (error) {
        console.error("Error fetching history:", error);
      }
    }

    // Render price chart
    function renderPriceChart(prices, coinName) {
      const ctx = document.getElementById("priceChart").getContext("2d");

      if (priceChart) {
        priceChart.destroy();
      }

      const labels = prices.map(([timestamp]) =>
        new Date(timestamp).toLocaleDateString()
      );
      const data = prices.map(([, price]) => price);

      priceChart = new Chart(ctx, {
        type: "line",
        data: {
          labels: labels,
          datasets: [
            {
              label: `${coinName} Price (USD)`,
              data: data,
              borderColor: "#3b82f6",
              backgroundColor: "rgba(59, 130, 246, 0.1)",
              borderWidth: 2,
              fill: true,
              tension: 0.1,
            },
          ],
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              display: true,
              position: "top",
            },
          },
          scales: {
            y: {
              beginAtZero: false,
              grid: {
                color: "rgba(0, 0, 0, 0.1)",
              },
            },
            x: {
              grid: {
                display: false,
              },
              ticks: {
                maxTicksLimit: 10,
              },
            },
          },
        },
      });
    }

    // Search functionality
    function setupSearch() {
      const searchInput = document.getElementById("searchInput");
      searchInput.addEventListener("input", (e) => {
        const searchTerm = e.target.value.toLowerCase();
        const coinCards = document.querySelectorAll(".coin-card");

        coinCards.forEach((card) => {
          const coinName = card.querySelector("h3").textContent.toLowerCase();
          if (coinName.includes(searchTerm)) {
            card.style.display = "block";
          } else {
            card.style.display = "none";
          }
        });
      });
    }

    // Close chart
    function setupCloseChart() {
      document.getElementById("closeChart").addEventListener("click", () => {
        document.getElementById("chartSection").classList.add("hidden");
      });
    }

    // Initialize
    function init() {
      fetchPrices();
      setupSearch();
      setupCloseChart();

      // Refresh prices every 30 seconds
      refreshInterval = setInterval(fetchPrices, 30000);
    }

    // Start when DOM is loaded
    document.addEventListener("DOMContentLoaded", init);
  </script>
</body>
</html>
